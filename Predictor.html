<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TNEA 7.5% Predictor</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
        select, input { width: 100%; padding: 8px; }
        button { padding: 10px 20px; background-color: #4CAF50; color: white; border: none; cursor: pointer; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <h2>TNEA 7.5% Predictor</h2>
    <form id="predictForm">
        <div class="form-group">
            <label for="community">Community:</label>
            <select id="community" name="community">
                <option value="OC">OC</option>
                <option value="BC">BC</option>
                <option value="7.5_quota">7.5% Quota</option>
            </select>
        </div>
        <div class="form-group">
            <label for="rank">Community Rank:</label>
            <input type="number" id="rank" name="rank" min="1" required>
        </div>
        <div class="form-group">
            <label for="district">District:</label>
            <select id="district" name="district">
                <option value="Chennai">Chennai</option>
                <option value="Coimbatore">Coimbatore</option>
                <!-- Add all 38 districts from colleges.json -->
            </select>
        </div>
        <div class="form-group">
            <label for="course">Course:</label>
            <select id="course" name="course">
                <option value="CS">Computer Science</option>
                <option value="EC">Electronics</option>
                <!-- Add other branches from colleges.json -->
            </select>
        </div>
        <button type="submit">Predict</button>
    </form>
    <table id="results" style="display:none;">
        <thead>
            <tr><th>College</th><th>Cut-off</th></tr>
        </thead>
        <tbody></tbody>
    </table>
    <script>
        document.getElementById('predictForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const community = document.getElementById('community').value;
            const rank = document.getElementById('rank').value;
            const district = document.getElementById('district').value;
            const course = document.getElementById('course').value;
            fetch('/colleges.json')
                .then(response => response.json())
                .then(data => {
                    const results = data.filter(college => 
                        college.district === district && 
                        college.cutoff_2025[course] && 
                        college.cutoff_2025[course][community] <= rank
                    ).sort((a, b) => 
                        b.cutoff_2025[course][community] - a.cutoff_2025[course][community]
                    ).slice(0, 10); // Top 10 colleges
                    const tbody = document.querySelector('#results tbody');
                    tbody.innerHTML = '';
                    results.forEach(college => {
                        const row = document.createElement('tr');
                        row.innerHTML = `<td>${college.institute_name}</td><td>${college.cutoff_2025[course][community]}</td>`;
                        tbody.appendChild(row);
                    });
                    document.getElementById('results').style.display = 'table';
                });
        });
    </script>
</body>
</html>
